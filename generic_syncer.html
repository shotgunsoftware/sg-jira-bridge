

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generic Syncer &mdash; sg-jira-bridge v0.6.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="Installing as a Service" href="services.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    <a href='https://help.autodesk.com/view/SGDEV/ENU/'>
    
        <img style='width: 191px;
                height: 60px;
                margin: 2px;
                border-radius: 0px;
                padding: 0px;'
            src='_static/logo_sg@2x.png'/>
    
    </a>
    

          
          
          <a href="index.html" class="icon icon-home">
            sg-jira-bridge
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Developer Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="services.html">Installing as a Service</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Generic Syncer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#jira-configuration">Jira Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flow-production-tracking-configuration">Flow Production Tracking Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flow-production-tracking-event-daemon-configuration">Flow Production Tracking Event Daemon Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-the-syncer">Enabling the syncer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configure-the-bridge-sync-settings">Configure the Bridge sync settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#defining-entity-syncing">Defining entity syncing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#specifying-sync-direction">Specifying sync direction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#status-mapping">Status mapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parent-children-relationship">Parent/children relationship</a></li>
<li class="toctree-l4"><a class="reference internal" href="#syncing-fptr-notes-as-jira-comments">Syncing FPTR Notes as Jira Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#syncing-fptr-timelogs-as-jira-worklogs">Syncing FPTR TimeLogs as Jira Worklogs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#hook">Hook</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-how-to-sync-jira-epics-to-fptr-and-keep-the-epic-task-relationship">Example: How to sync Jira Epics to FPTR and keep the Epic/Task relationship</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Flow Production Tracking configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Jira configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fptr-event-daemon-configuration">FPTR Event Daemon Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-configuration">Setting configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expected-results">Expected results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#known-issues">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="known_issues.html">Known Issues &amp; Compatibility Notes</a></li>
</ul>


    <a href='genindex.html'>Alphabetic Index</a>

    <div style='margin-top: 50px;
                margin-left: 10px;
                margin-right: 10px;
                padding: 10px;
                color: #b3b3b3;
                font-size: 70%;
                border-radius: 3px;
                background-color: #444;
                line-height: 18px;
                '>
    <style>
        a.custom_post_menu { display: inline;
                             padding: 0px;
                             text-decoration: underline; }
    </style>

    <b>sg-jira-bridge</b> v0.6.0.<br>
    
    For more information, please visit
    <a class=custom_post_menu href='https://help.autodesk.com/view/SGDEV/ENU/'>The Flow Production Tracking developer portal.</a>.
    The code associated with this documentation can be found
    <a class=custom_post_menu href='https://github.com/shotgunsoftware/sg-jira-bridge'>here</a>.

    </div>
    <style>
        p.privacy_links { margin: 4px 0px;}
    </style>
    <p class="privacy_links"><a data-opt-in-preferences href="javascript:;">Privacy settings</a></p>
    <p class="privacy_links"><a data-wat-linkname="manage-ccpa-settings-footer-link" href="javascript:;">Do not sell my personal information</a></p>
    <p class="privacy_links"><a href="https://www.autodesk.com/company/legal-notices-trademarks/privacy-statement">Privacy/Cookies</a></p>



        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">sg-jira-bridge</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Generic Syncer</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="generic-syncer">
<h1>Generic Syncer<a class="headerlink" href="#generic-syncer" title="Permalink to this heading"></a></h1>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this heading"></a></h2>
<p>In order to make the Jira Bridge customization easier, we’re introducing a new syncer/handler.
It offers the following changes:</p>
<ul class="simple">
<li><p>Uses the <code class="docutils literal notranslate"><span class="pre">settings.py</span></code> file to define the entities and fields we want to synchronize</p></li>
<li><p>Adds support for initiating the sync from Jira, not only from Flow Production Tracking</p></li>
<li><p>Introduces a new hook functionality to override the behavior of some methods</p></li>
</ul>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>At this point, we are assuming that the Jira Bridge has been correctly configured by following the main configuration process.
The next section describes only the steps required to set up and configure this new handler.</p>
<section id="jira-configuration">
<span id="entity-sync-jira-config"></span><h3>Jira Configuration<a class="headerlink" href="#jira-configuration" title="Permalink to this heading"></a></h3>
<p>For each Issue Type we want to sync in Jira, we need to make sure that the following Jira fields exist and are available in Boards:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Field Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Shotgun Type</p></td>
<td><p>Text</p></td>
<td><p>Stores the associated Flow Production Tracking Entity type</p></td>
</tr>
<tr class="row-odd"><td><p>Shotgun ID</p></td>
<td><p>Text</p></td>
<td><p>Stores the associated Flow Production Tracking Entity ID</p></td>
</tr>
<tr class="row-even"><td><p>Shotgun URL</p></td>
<td><p>Text</p></td>
<td><p>Stores a link to the detail page for the associated entity in PTR</p></td>
</tr>
<tr class="row-odd"><td><p>Sync In FPTR</p></td>
<td><p>Select List (single choice)</p></td>
<td><p>Boolean to trigger the sync from Jira to FPTR. It should contain two options: <code class="docutils literal notranslate"><span class="pre">True</span></code> and <code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="flow-production-tracking-configuration">
<span id="entity-sync-fptr-config"></span><h3>Flow Production Tracking Configuration<a class="headerlink" href="#flow-production-tracking-configuration" title="Permalink to this heading"></a></h3>
<p>For each entity type we want to sync in Flow Production Tracking as Jira Issues, we need to make sure that the following FPTR fields exist:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Field Name</p></th>
<th class="head"><p>Field Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Field Code (auto-generated)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Jira Sync URL</p></td>
<td><p>File/Link</p></td>
<td><p>URL of the associated Jira Bridge Issue</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sg_jira_sync_url</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Jira Key</p></td>
<td><p>Text</p></td>
<td><p>Synced Issue Key value in Jira</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sg_jira_key</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Sync In Jira</p></td>
<td><p>Checkbox</p></td>
<td><p>Enable/Disable syncing for this Entity</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sg_sync_in_jira</span></code></p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Flow Production Tracking <code class="docutils literal notranslate"><span class="pre">TimeLog</span></code> and <code class="docutils literal notranslate"><span class="pre">Note</span></code> entities follow a specific workflow. For those entity types, only the
<code class="docutils literal notranslate"><span class="pre">Jira</span> <span class="pre">Key</span></code> field is mandatory.</p>
</div>
</section>
<section id="flow-production-tracking-event-daemon-configuration">
<h3>Flow Production Tracking Event Daemon Configuration<a class="headerlink" href="#flow-production-tracking-event-daemon-configuration" title="Permalink to this heading"></a></h3>
<p>When you enable the sync from Flow Production Tracking to Jira for a new entity type, you must also update
the <code class="docutils literal notranslate"><span class="pre">sg_jira_event_trigger</span></code> plugin and add the corresponding event.</p>
</section>
<section id="enabling-the-syncer">
<h3>Enabling the syncer<a class="headerlink" href="#enabling-the-syncer" title="Permalink to this heading"></a></h3>
<p>To use the generic syncer, you need to point at the right entry in the settings file.
In order to do that, you have to make sure the right URLs are used in both Flow Production Tracking and Jira.</p>
<p>Looking at the syncer entry in the <code class="docutils literal notranslate"><span class="pre">settings.py</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SYNC</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># Add the entities generic syncer to the list of syncers, it will be available</span>
    <span class="c1"># with the http://&lt;your server&gt;/jira2sg/entities and http://&lt;your server&gt;/sg2jira/entities</span>
    <span class="c1"># urls.</span>
    <span class="s2">&quot;entities&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;syncer&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_jira.EntitiesGenericSyncer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You need to make sure that:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">http://&lt;your</span> <span class="pre">server&gt;/sg2jira/entities</span></code> is used in the <code class="docutils literal notranslate"><span class="pre">Jira</span> <span class="pre">Sync</span> <span class="pre">URL</span></code> field of your Flow Production Tracking Project</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">http://&lt;your</span> <span class="pre">server&gt;/jira2sg/entities</span></code> is used in the webhook URL on the Jira side</p></li>
</ul>
</section>
<section id="configure-the-bridge-sync-settings">
<h3>Configure the Bridge sync settings<a class="headerlink" href="#configure-the-bridge-sync-settings" title="Permalink to this heading"></a></h3>
<p>To simplify the configuration/customization of the sync between Flow Production Tracking and Jira, youneed to edit only the <code class="docutils literal notranslate"><span class="pre">settings.py</span></code> file to map Flow Production Tracking entity type/fields to Jira Issue type/fields.</p>
<section id="defining-entity-syncing">
<span id="entity-sync-settings"></span><h4>Defining entity syncing<a class="headerlink" href="#defining-entity-syncing" title="Permalink to this heading"></a></h4>
<p>In order to sync a Flow Production Tracking entity type as Issue in Jira, add the following entries to the <code class="docutils literal notranslate"><span class="pre">entity_mapping</span></code> dictionary.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sg_entity</span></code></p></td>
<td><p>Type of the Flow Production Entity we want to sync as a Jira Issue</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">jira_issue_type</span></code></p></td>
<td><p>Type of the Jira Issue we want to associate to the Flow Production Tracking Entity</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">field_mapping</span></code></p></td>
<td><p>List of Python dictionaries that define the entity fields to sync</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">status_mapping</span></code></p></td>
<td><p>Python dictionary that specify how to sync statuses for the given entity and issue type</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sync_direction</span></code></p></td>
<td><p>[Optional] Specify the sync direction (default is both ways)</p></td>
</tr>
</tbody>
</table>
<p>To map which Jira fields are syncing to which entity type, we rely on the <code class="docutils literal notranslate"><span class="pre">field_mapping</span></code> list of dictionaries specified in the previous table.
Each dictionary of the list must contain the following entries:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sg_field</span></code></p></td>
<td><p>Code of the Flow Production Tracking field we want to sync to Jira</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">jira_field</span></code></p></td>
<td><p>Name of the associated Jira field we want to sync to Flow Production Tracking</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sync_direction</span></code></p></td>
<td><p>[Optional] Specify the sync direction (default is both ways)</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only the fields added in the <code class="docutils literal notranslate"><span class="pre">field_mapping</span></code> list will be synced between Flow Production Tracking and Jira.</p>
</div>
<p>Here is an example to sync Flow Production Task entity to a Jira Task Issue, only syncing the FPTR <code class="docutils literal notranslate"><span class="pre">content</span></code> field that’s mapped to the Jira <code class="docutils literal notranslate"><span class="pre">summary</span></code> field.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SYNC</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;entities&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;syncer&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_jira.EntitiesGenericSyncer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;entity_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                     <span class="s2">&quot;sg_entity&quot;</span><span class="p">:</span> <span class="s2">&quot;Task&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;jira_issue_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Task&quot;</span><span class="p">,</span>
<span class="hll">                     <span class="s2">&quot;field_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class="hll">                        <span class="p">{</span>
</span><span class="hll">                             <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;content&quot;</span><span class="p">,</span>
</span><span class="hll">                             <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;summary&quot;</span><span class="p">,</span>
</span><span class="hll">                        <span class="p">}</span>
</span><span class="hll">                     <span class="p">]</span>
</span>                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="specifying-sync-direction">
<h4>Specifying sync direction<a class="headerlink" href="#specifying-sync-direction" title="Permalink to this heading"></a></h4>
<p>To have more control over what to sync, it is possible to define a sync direction per entity type and fields.
To do that, use the <code class="docutils literal notranslate"><span class="pre">sync_direction</span></code> dictionary key described in the table above.
If you don’t specify the <code class="docutils literal notranslate"><span class="pre">sync_direction</span></code>, it uses the default, which is to sync both ways.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">sync_direction</span></code> values can be one of the following:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">both_way</span></code></p></td>
<td><p>The entity or field will be synced both ways (update from FPTR will be reflected in Jira and vice-versa)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">jira_to_sg</span></code></p></td>
<td><p>The entity or field sync will be happening only from Jira to FPTR (updates from FPTR won’t appear in Jira)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sg_to_jira</span></code></p></td>
<td><p>The entity or field sync will be happening only from FPTR to Jira (updates from Jira won’t appear in FPTR)</p></td>
</tr>
</tbody>
</table>
<p>Here is an example of the use of the <code class="docutils literal notranslate"><span class="pre">sync_direction</span></code> setting:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SYNC</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;entities&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;syncer&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_jira.EntitiesGenericSyncer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;entity_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                     <span class="s2">&quot;sg_entity&quot;</span><span class="p">:</span> <span class="s2">&quot;Task&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;jira_issue_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Task&quot;</span><span class="p">,</span>
<span class="hll">                     <span class="s2">&quot;sync_direction&quot;</span><span class="p">:</span> <span class="s2">&quot;both_way&quot;</span><span class="p">,</span>
</span>                     <span class="s2">&quot;field_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                             <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;content&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;summary&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;sync_direction&quot;</span><span class="p">:</span> <span class="s2">&quot;jira_to_sg&quot;</span><span class="p">,</span>
                        <span class="p">}</span>
                     <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="status-mapping">
<h4>Status mapping<a class="headerlink" href="#status-mapping" title="Permalink to this heading"></a></h4>
<p>You can also sync statuses between a Jira Issue and a Flow Production Tracking entity.
In order to do that, use the <code class="docutils literal notranslate"><span class="pre">status_mapping</span></code> entry described in <a class="reference internal" href="#entity-sync-settings"><span class="std std-ref">Defining entity syncing</span></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">status_mapping</span></code> entry is a python dictionary that accepts the following entries:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sg_field</span></code></p></td>
<td><p>Code of the Flow Production Tracking status field we want to sync with the Jira Issue status</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mapping</span></code></p></td>
<td><p>Python dictionary where the key is the FPTR status code and the value is the associated Jira status name</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sync_direction</span></code></p></td>
<td><p>[Optional] Specify the sync direction (default is both ways)</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For statuses, we only need to specify the FPTR field we want to use because an FPTR entity can have many status fields.
But a Jira Issue can have one and only one status field.</p>
</div>
<p>Here is an example of what a <code class="docutils literal notranslate"><span class="pre">status_mapping</span></code> definition can look like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SYNC</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;entities&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;syncer&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_jira.EntitiesGenericSyncer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;entity_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                     <span class="s2">&quot;sg_entity&quot;</span><span class="p">:</span> <span class="s2">&quot;Task&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;jira_issue_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Task&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;field_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                             <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;content&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;summary&quot;</span><span class="p">,</span>
                        <span class="p">}</span>
                     <span class="p">],</span>
<span class="hll">                     <span class="s2">&quot;status_mapping&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class="hll">                        <span class="s2">&quot;sync_direction&quot;</span><span class="p">:</span> <span class="s2">&quot;jira_to_sg&quot;</span><span class="p">,</span>
</span><span class="hll">                        <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_status_list&quot;</span><span class="p">,</span>
</span><span class="hll">                        <span class="s2">&quot;mapping&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class="hll">                            <span class="s2">&quot;wtg&quot;</span><span class="p">:</span> <span class="s2">&quot;To Do&quot;</span><span class="p">,</span>
</span><span class="hll">                            <span class="s2">&quot;rdy&quot;</span><span class="p">:</span> <span class="s2">&quot;Open&quot;</span><span class="p">,</span>
</span><span class="hll">                            <span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;In Progress&quot;</span><span class="p">,</span>
</span><span class="hll">
</span><span class="hll">                        <span class="p">}</span>
</span><span class="hll">                    <span class="p">}</span>
</span>                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="parent-children-relationship">
<h4>Parent/children relationship<a class="headerlink" href="#parent-children-relationship" title="Permalink to this heading"></a></h4>
<p>In Jira, it is possible to define an issue type hierarchy.
You can replicate this behavior in Flow Production Tracking with the <code class="docutils literal notranslate"><span class="pre">entity</span></code>/<code class="docutils literal notranslate"><span class="pre">multi-entity</span></code> field relationship between entities.</p>
<p>In the Jira Bridge settings, the hierarchy is defined using the <code class="docutils literal notranslate"><span class="pre">parent</span></code> Jira field associated with the corresponding FPTR field in the <code class="docutils literal notranslate"><span class="pre">field_mapping</span></code> entry.</p>
<p>In order to have a both-way sync, we must also define the child relationship. There is no child field for Jira Issues, so the <code class="docutils literal notranslate"><span class="pre">{{CHILDREN}}</span></code> keyword must be used instead.</p>
<p>Here is an example of how to replicate the Task/Epic Jira relationship, using a FPTR Custom Entity:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SYNC</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;entities&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;syncer&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_jira.EntitiesGenericSyncer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;entity_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                     <span class="s2">&quot;sg_entity&quot;</span><span class="p">:</span> <span class="s2">&quot;Task&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;jira_issue_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Task&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;field_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                             <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;content&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;summary&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
<span class="hll">                        <span class="p">{</span>
</span><span class="hll">                             <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_epic&quot;</span><span class="p">,</span>
</span><span class="hll">                             <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;parent&quot;</span><span class="p">,</span>
</span><span class="hll">                        <span class="p">},</span>
</span>                     <span class="p">],</span>
                <span class="p">},</span>
                <span class="p">{</span>
                     <span class="s2">&quot;sg_entity&quot;</span><span class="p">:</span> <span class="s2">&quot;CustomEntity04&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;jira_issue_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Epic&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;field_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                             <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;code&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;summary&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
<span class="hll">                        <span class="p">{</span>
</span><span class="hll">                             <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_tasks&quot;</span><span class="p">,</span>
</span><span class="hll">                             <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;{{CHILDREN}}&quot;</span><span class="p">,</span>
</span><span class="hll">                        <span class="p">},</span>
</span>                     <span class="p">],</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because a Jira Issue can only have one parent, the associated FPTR field must be an <code class="docutils literal notranslate"><span class="pre">entity</span></code> field. It can’t be a <code class="docutils literal notranslate"><span class="pre">multi-entity</span></code> field.</p>
</div>
</section>
<section id="syncing-fptr-notes-as-jira-comments">
<h4>Syncing FPTR Notes as Jira Comments<a class="headerlink" href="#syncing-fptr-notes-as-jira-comments" title="Permalink to this heading"></a></h4>
<p>The Flow Production Tracking Note entity is always represented as Comments in Jira and always linked to an existing Issue.
The entity mapping is done automatically, that’s why you don’t need to define the <code class="docutils literal notranslate"><span class="pre">jira_issue_type</span></code> and <code class="docutils literal notranslate"><span class="pre">field_mapping</span></code> keys.</p>
<p>To enable Note syncing, you only need to add the entry in the <code class="docutils literal notranslate"><span class="pre">entity_mapping</span></code> dictionary with the <code class="docutils literal notranslate"><span class="pre">sg_field</span></code> key.</p>
<p>Notes/Comments workflow also handle deletion. The new <code class="docutils literal notranslate"><span class="pre">sync_deletion_direction</span></code> setting controls what’s deleted, and can have the following values:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p>[<strong>DEFAULT VALUE</strong>] If a Note is deleted in FPTR, the associated Comment won’t be deleted in Jira (and vice versa)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">both_way</span></code></p></td>
<td><p>If a Note is deleted in FPTR, the associated Comment will be deleted in Jira (and vice versa)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">jira_to_sg</span></code></p></td>
<td><p>If a Note is deleted in FPTR, the associated Comment won’t be deleted in Jira. But if a Comment is deleted in Jira, the associated Note will be deleted in FPTR</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sg_to_jira</span></code></p></td>
<td><p>If a Note is deleted in FPTR, the associated Comment will be deleted in Jira. But if a Comment is deleted in Jira, the associated Note won’t be deleted in FPTR</p></td>
</tr>
</tbody>
</table>
<p>Here is an example of how you can enable Note/Comment syncing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SYNC</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;entities&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;syncer&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_jira.EntitiesGenericSyncer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;entity_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                     <span class="s2">&quot;sg_entity&quot;</span><span class="p">:</span> <span class="s2">&quot;Task&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;jira_issue_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Task&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;field_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                             <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;content&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;summary&quot;</span><span class="p">,</span>
                        <span class="p">}</span>
                     <span class="p">]</span>
                <span class="p">},</span>
<span class="hll">                <span class="p">{</span>
</span><span class="hll">                    <span class="s2">&quot;sg_entity&quot;</span><span class="p">:</span> <span class="s2">&quot;Note&quot;</span><span class="p">,</span>
</span><span class="hll">                    <span class="s2">&quot;sync_deletion_direction&quot;</span><span class="p">:</span> <span class="s2">&quot;jira_to_sg&quot;</span><span class="p">,</span>
</span><span class="hll">                <span class="p">}</span>
</span>            <span class="p">]</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to enable Comment deletion from Jira, you have to make sure that the <code class="docutils literal notranslate"><span class="pre">Comment:</span> <span class="pre">deleted</span></code> event is enabled in the Jira webhook.
On Flow Production Tracking, you don’t need to set anything as the FPTR Event Daemon <code class="docutils literal notranslate"><span class="pre">sg_jira_event_trigger</span></code> plugin already handles the deletion.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When creating a Jira comment using the API, it is not possible to set the author. To keep a track of who created the Note in FPTR, the
author’s name is embedded in the Jira comment body.</p>
</div>
</section>
<section id="syncing-fptr-timelogs-as-jira-worklogs">
<h4>Syncing FPTR TimeLogs as Jira Worklogs<a class="headerlink" href="#syncing-fptr-timelogs-as-jira-worklogs" title="Permalink to this heading"></a></h4>
<p>The Flow Production Tracking TimeLog entity is always represented as Worklogs in Jira and always linked to an existing Issue.
The entity mapping is done automatically, that’s why you don’t need to define the <code class="docutils literal notranslate"><span class="pre">jira_issue_type</span></code> key but you can still use the <code class="docutils literal notranslate"><span class="pre">field_mapping</span></code> key to decide which fields to sync.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When creating a Worklog in Jira, some fields are mandatory. Make sure that the <code class="docutils literal notranslate"><span class="pre">comment</span></code> and <code class="docutils literal notranslate"><span class="pre">timeSpentSeconds</span></code> Jira fields are correctly
mapped to some FPTR TimeLog fields.</p>
</div>
<p>TimeLogs/Worklogs workflow also handle deletion. The new <code class="docutils literal notranslate"><span class="pre">sync_deletion_direction</span></code> setting controls what’s deleted, and can have the following values:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p>[<strong>DEFAULT VALUE</strong>] If a TimeLog is deleted in FPTR, the associated Worklog won’t be deleted in Jira (and vice versa)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">both_way</span></code></p></td>
<td><p>If a TimeLog is deleted in FPTR, the associated Worklog will be deleted in Jira (and vice versa)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">jira_to_sg</span></code></p></td>
<td><p>If a TimeLog is deleted in FPTR, the associated Worklog won’t be deleted in Jira. But if a Worklog is deleted in Jira, the associated TimeLog will be deleted in FPTR</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sg_to_jira</span></code></p></td>
<td><p>If a TimeLog is deleted in FPTR, the associated Worklog will be deleted in Jira. But if a Worklog is deleted in Jira, the associated TimeLog won’t be deleted in FPTR</p></td>
</tr>
</tbody>
</table>
<p>Here is an example of how you can enable TimeLog/Worklog syncing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SYNC</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;entities&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;syncer&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_jira.EntitiesGenericSyncer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;entity_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                     <span class="s2">&quot;sg_entity&quot;</span><span class="p">:</span> <span class="s2">&quot;Task&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;jira_issue_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Task&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;field_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                             <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;content&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;summary&quot;</span><span class="p">,</span>
                        <span class="p">}</span>
                     <span class="p">]</span>
                <span class="p">},</span>
<span class="hll">                <span class="p">{</span>
</span><span class="hll">                    <span class="s2">&quot;sg_entity&quot;</span><span class="p">:</span> <span class="s2">&quot;TimeLog&quot;</span><span class="p">,</span>
</span><span class="hll">                    <span class="s2">&quot;sync_direction&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_to_jira&quot;</span><span class="p">,</span>
</span><span class="hll">                    <span class="s2">&quot;field_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class="hll">                        <span class="p">{</span>
</span><span class="hll">                            <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;date&quot;</span><span class="p">,</span>
</span><span class="hll">                            <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;started&quot;</span><span class="p">,</span>
</span><span class="hll">                        <span class="p">},</span>
</span><span class="hll">                        <span class="p">{</span>
</span><span class="hll">                            <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;duration&quot;</span><span class="p">,</span>
</span><span class="hll">                            <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;timeSpentSeconds&quot;</span><span class="p">,</span>
</span><span class="hll">                        <span class="p">},</span>
</span><span class="hll">                        <span class="p">{</span>
</span><span class="hll">                            <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span>
</span><span class="hll">                            <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;comment&quot;</span><span class="p">,</span>
</span><span class="hll">                        <span class="p">},</span>
</span><span class="hll">                    <span class="p">]</span>
</span><span class="hll">                <span class="p">}</span>
</span>            <span class="p">]</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to enable Worklog deletion from Jira, you must enable the <code class="docutils literal notranslate"><span class="pre">Worklog:</span> <span class="pre">deleted</span></code> event in the Jira webhook.
On Flow Production Tracking, you don’t need to set anything as the FPTR Event Daemon <code class="docutils literal notranslate"><span class="pre">sg_jira_event_trigger</span></code> plugin already handles the deletion.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When creating a Jira comment using the API, it is not possible to set the author. To keep a track of who created the Timelog in FPTR, the
author’s name is embedded in the Jira worklog comment.</p>
</div>
</section>
</section>
</section>
<section id="hook">
<h2>Hook<a class="headerlink" href="#hook" title="Permalink to this heading"></a></h2>
<p>In order to make it easier to customize the Bridge, some methods have been moved to a specific <code class="docutils literal notranslate"><span class="pre">Hook</span></code> class that can be overridden,
allowing users to do modifications outside of the repository itself.</p>
<p>Here is an example of how you can modify the behavior of the method returning the Jira value for a given FPTR value:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Create a python file that can be stored wherever you want</p></li>
<li><p>Within this file, import the <code class="docutils literal notranslate"><span class="pre">JiraHook</span></code> class from the <code class="docutils literal notranslate"><span class="pre">sg_jira</span></code> module</p></li>
<li><p>Create a class that inherits from <code class="docutils literal notranslate"><span class="pre">JiraHook</span></code></p></li>
<li><p>Within this class, override the method(s) you want</p></li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">settings.py</span></code> file, specify the hook path using the <code class="docutils literal notranslate"><span class="pre">hook</span></code> settings key</p></li>
</ol>
</div></blockquote>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Example of custom JiraHook class</span><a class="headerlink" href="#id3" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sg_jira</span><span class="w"> </span><span class="kn">import</span> <span class="n">JiraHook</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomJiraHook</span><span class="p">(</span><span class="n">JiraHook</span><span class="p">):</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_jira_value_from_sg_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sg_value</span><span class="p">,</span> <span class="n">jira_issue</span><span class="p">,</span> <span class="n">jira_field</span><span class="p">,</span> <span class="n">jira_field_properties</span><span class="p">,</span> <span class="n">skip_array_check</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">jira_field</span> <span class="o">==</span> <span class="s2">&quot;my_jira_field_type&quot;</span><span class="p">:</span>
            <span class="c1"># put your custom code here to get jira_value</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">CustomJiraHook</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_jira_value_from_sg_value</span><span class="p">(</span><span class="n">sg_value</span><span class="p">,</span> <span class="n">jira_issue</span><span class="p">,</span> <span class="n">jira_field</span><span class="p">,</span> <span class="n">jira_field_properties</span><span class="p">,</span> <span class="n">skip_array_check</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">How to reference the hook in the settings</span><a class="headerlink" href="#id4" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="n">SYNC</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;entities&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;syncer&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_jira.EntitiesGenericSyncer&quot;</span><span class="p">,</span>
<span class="hll">        <span class="s2">&quot;hook&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/my/custom/hook/file.py&quot;</span><span class="p">,</span>
</span>        <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;entity_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="o">...</span><span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="example-how-to-sync-jira-epics-to-fptr-and-keep-the-epic-task-relationship">
<h2>Example: How to sync Jira Epics to FPTR and keep the Epic/Task relationship<a class="headerlink" href="#example-how-to-sync-jira-epics-to-fptr-and-keep-the-epic-task-relationship" title="Permalink to this heading"></a></h2>
<p>In Jira, it is possible to use Epics as Task parents to define a hierarchy between Issues. This example explains
how to configure Flow Production Tracking and the Jira Bridge so as to sync everything between Jira and FPTR, while keeping the relationships that already exist
in Jira.</p>
<section id="id1">
<h3>Flow Production Tracking configuration<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<p>In Flow Production Tracking, we are going to use a <code class="docutils literal notranslate"><span class="pre">CustomProjectEntity</span></code> to represent Jira Epics and the <code class="docutils literal notranslate"><span class="pre">Task</span></code> entity to represent the Jira Tasks.
The relationship between these two entities will be created using a custom <code class="docutils literal notranslate"><span class="pre">entity</span></code> field.</p>
<p>Here are the steps we need to perform in Flow Production Tracking:</p>
<ul class="simple">
<li><p>Enable in Flow Production Tracking a CustomProjectEntity that will represent the Epic.</p></li>
</ul>
<img alt="_images/epic_syncing_enable_entity.png" src="_images/epic_syncing_enable_entity.png" />
<ul class="simple">
<li><p>Ensure that the mandatory FPTR fields described in <a class="reference internal" href="#entity-sync-fptr-config"><span class="std std-ref">Flow Production Tracking Configuration</span></a> are created for this entity type.</p></li>
<li><p>On the <code class="docutils literal notranslate"><span class="pre">Task</span></code> entity, create an <code class="docutils literal notranslate"><span class="pre">entity</span></code> field to be able to link an Epic entity to a Task entity in Flow Production Tracking.</p></li>
</ul>
<img alt="_images/epic_syncing_epic_field.png" src="_images/epic_syncing_epic_field.png" />
</section>
<section id="id2">
<h3>Jira configuration<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<p>In Jira, you need to do the following:</p>
<ul class="simple">
<li><p>Enable the Issue Type <code class="docutils literal notranslate"><span class="pre">Epic</span></code> in Jira and check in the hierarchy setting that the <code class="docutils literal notranslate"><span class="pre">Task</span></code> Issue type accepts the <code class="docutils literal notranslate"><span class="pre">Epic</span></code> Issue type as parent.</p></li>
<li><p>Make sure that all the fields described in <a class="reference internal" href="#entity-sync-jira-config"><span class="std std-ref">Jira Configuration</span></a> exist and are enabled for the <code class="docutils literal notranslate"><span class="pre">Epic</span></code> Issue Type.</p></li>
</ul>
</section>
<section id="fptr-event-daemon-configuration">
<h3>FPTR Event Daemon Configuration<a class="headerlink" href="#fptr-event-daemon-configuration" title="Permalink to this heading"></a></h3>
<p>In order to have the sync working from FPTR to Jira, you need to add the corresponding event to the <code class="docutils literal notranslate"><span class="pre">sg_jira_event_trigger</span></code> plugin.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">registerCallbacks</span><span class="p">(</span><span class="n">reg</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Register all necessary or appropriate callbacks for this plugin.</span>

<span class="sd">    Flow Production Tracking credentials are retrieved from the `SGDAEMON_SGJIRA_NAME` and `SGDAEMON_SGJIRA_KEY`</span>
<span class="sd">    environment variables.</span>

<span class="sd">    :param reg: A Flow Production Tracking Event Daemon Registrar instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Narrow down the list of events we pass to the bridge</span>
    <span class="n">event_filter</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Shotgun_Note_Change&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Shotgun_Task_Change&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Shotgun_Ticket_Change&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Shotgun_Project_Change&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
<span class="hll">        <span class="s2">&quot;Shotgun_CustomEntity04_Change&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>  <span class="c1"># Needed to sync the Task/Epic linking</span>
</span>        <span class="c1"># These events require a reset of the bridge to ensure our cached schema</span>
        <span class="c1"># is up to date.</span>
        <span class="s2">&quot;Shotgun_DisplayColumn_New&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Shotgun_DisplayColumn_Change&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Shotgun_DisplayColumn_Retirement&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Shotgun_Status_New&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Shotgun_Status_Change&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
        <span class="s2">&quot;Shotgun_Status_Retirement&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
    <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="setting-configuration">
<h3>Setting configuration<a class="headerlink" href="#setting-configuration" title="Permalink to this heading"></a></h3>
<p>Once Jira and Flow Production Tracking are correctly configured, we do the mapping in the <code class="docutils literal notranslate"><span class="pre">settings.py</span></code> file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SYNC</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;entities&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;syncer&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_jira.EntitiesGenericSyncer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;entity_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                     <span class="s2">&quot;sg_entity&quot;</span><span class="p">:</span> <span class="s2">&quot;Task&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;jira_issue_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Task&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;field_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                             <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;content&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;summary&quot;</span><span class="p">,</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
<span class="hll">                            <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_epic&quot;</span><span class="p">,</span>
</span><span class="hll">                            <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;parent&quot;</span><span class="p">,</span>
</span>                        <span class="p">},</span>
                     <span class="p">]</span>
                <span class="p">},</span>
<span class="hll">                <span class="p">{</span>
</span><span class="hll">                    <span class="s2">&quot;sg_entity&quot;</span><span class="p">:</span> <span class="s2">&quot;CustomEntity04&quot;</span><span class="p">,</span>
</span><span class="hll">                    <span class="s2">&quot;jira_issue_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Epic&quot;</span><span class="p">,</span>
</span><span class="hll">                    <span class="s2">&quot;field_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class="hll">                        <span class="p">{</span>
</span><span class="hll">                            <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;code&quot;</span><span class="p">,</span>
</span><span class="hll">                            <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;summary&quot;</span><span class="p">,</span>
</span><span class="hll">                        <span class="p">},</span>
</span><span class="hll">                        <span class="p">{</span>
</span><span class="hll">                             <span class="s2">&quot;sg_field&quot;</span><span class="p">:</span> <span class="s2">&quot;sg_tasks&quot;</span><span class="p">,</span>
</span><span class="hll">                             <span class="s2">&quot;jira_field&quot;</span><span class="p">:</span> <span class="s2">&quot;{{CHILDREN}}&quot;</span><span class="p">,</span>
</span><span class="hll">                        <span class="p">},</span>
</span><span class="hll">                    <span class="p">],</span>
</span><span class="hll">                <span class="p">}</span>
</span>            <span class="p">]</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="expected-results">
<h3>Expected results<a class="headerlink" href="#expected-results" title="Permalink to this heading"></a></h3>
<p>Based on the <code class="docutils literal notranslate"><span class="pre">sync_direction</span></code> you defined in the settings, you should now see your Epic/Tasks entities in both Jira and Flow Production Tracking.</p>
<figure class="align-default" id="id5">
<img alt="_images/jira_epic_syncing.png" src="_images/jira_epic_syncing.png" />
<figcaption>
<p><span class="caption-text">Epic/Task relationship in Jira</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id6">
<img alt="_images/fptr_epic_syncing.png" src="_images/fptr_epic_syncing.png" />
<figcaption>
<p><span class="caption-text">Epic/Task relationship in Jira</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
<section id="known-issues">
<h2>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this heading"></a></h2>
<p>Because Flow Production Tracking and Jira are both highly customizable and have different APIs,
there are some cases where things may not match up as expected. There are also cases where certain
features have not been implemented yet.</p>
<ul class="simple">
<li><p>Entity deletion, except for Note/Comment and TimeLog/Worklog, is still not supported.</p></li>
<li><p>Deleting a synced entity linked to another synced entity in FPTR won’t remove the link between the two entities in Jira.</p></li>
<li><p>When you delete an entity in FPTR and revive it, it won’t be re-synced in Jira.</p></li>
<li><p>If you edit, in Jira, a comment created in FPTR by removing the heading and/or modifying the formatted part of the comment’s body, the body of the FPTR Note can contain some Jira formatted string when it’s synced back to FPTR.</p></li>
<li><p>Comments created in Jira and synced to FPTR won’t appear in the Activity Stream in FPTR.</p></li>
<li><p>Jira subtasks are not supported as Issue Type because parent linking is mandatory in Jira.</p></li>
<li><p>Updating watchers on a Jira Issue don’t trigger any Jira webhook event, and so can’t trigger an update of the associated FPTR field.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="services.html" class="btn btn-neutral float-left" title="Installing as a Service" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="examples.html" class="btn btn-neutral float-right" title="Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Autodesk.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 

  <script type="text/javascript">
    window.wafCCPAForceShow = true;
    (function(a,b,c,d){
      a='https://tags.tiqcdn.com/utag/autodesk/micro-basic/prod/utag.js';
      b=document;c='script';d=b.createElement(c);d.src=a;d.type='text/java'+c;d.async=true;
      a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a);
    })();
  </script>


</body>
</html>